<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="popup.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="logo-container" style="justify-content: center; width: 100%;">
            <img src="../icons/icon48.png" alt="JAI Logo" style="width: 28px; height: 28px;">
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Login Section -->
        <div id="loginSection" class="section">
            <div>
                <h1>Welcome Back</h1>
                <p>Sign in to start optimizing your job applications.</p>
            </div>

            <button id="loginBtn" class="btn btn-primary">
                Login with JAI Web
            </button>

            <button id="checkCxnBtn" class="btn btn-secondary">
                Check Connection
            </button>

            <!-- Manual Fallback Link -->
            <div style="margin-top: 10px;">
                <span id="manualLink" class="footer-link" style="text-decoration: underline;">Enter Token
                    Manually</span>
            </div>

            <!-- Manual Input Form -->
            <div id="manualInput" class="manual-input-container">
                <div
                    style="text-align: left; margin-bottom: 8px; font-size: 11px; color: #666; background: #f3f4f6; padding: 8px; border-radius: 4px; border: 1px solid #e5e7eb;">
                    <strong>How to get token:</strong><br>
                    1. Go to JAI Dashboard (localhost:3000)<br>
                    2. Press <b>F12</b> > <b>Application</b> tab > <b>Cookies</b><br>
                    3. Copy value of <b>next-auth.session-token</b><br>
                    4. Paste below:
                </div>
                <input type="text" id="tokenInput" placeholder="Paste token here..." style="font-size: 12px;">
                <button id="saveTokenBtn" class="btn btn-primary" style="padding: 8px;">Save Token</button>
            </div>
        </div>

        <!-- Main UI (Hidden by default) -->
        <div id="mainSection" class="section hidden">
            <div>
                <h1>Tailor Your Resume</h1>
                <p>Optimize your resume for the job description on the current tab.</p>
            </div>

            <button id="autofillBtn" class="btn btn-primary" style="margin-top: 10px;">
                Autofill Application
            </button>

            <button id="automateBtn"
                style="margin-top: 10px; background: transparent; border: 1px solid #ccc; color: #666; font-size: 12px; padding: 6px 12px; width: auto; align-self: center;">
                Tailor Resume
            </button>

            <!-- Autofill Report (Hidden by default) -->
            <div id="reportList" class="report-list hidden">
                <!-- Items injected by JS -->
            </div>

            <div class="status-card">
                <div id="status" style="font-size: 13px; font-weight: 500;">Ready to optimize</div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div id="statsLink" class="footer-link">Settings</div>
        <div id="logoutBtn" class="footer-link">Logout</div>
    </footer>

    <script src="popup.js"></script>
</body>

</html>